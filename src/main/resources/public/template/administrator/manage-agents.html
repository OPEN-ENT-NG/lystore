<div class="row agent-management" ng-controller="administratorController">
    <div class="twelve">
        <button class="right-magnet" ng-click="openAgentForm()">
            <i18n>lystore.agent.add</i18n>
        </button>
    </div>
    <div class="centered six">
        <h1><i18n>lystore.locality.agents</i18n></h1>
        <article>
            <table class="twelve">
                <thead>
                <td>
                    <label class="checkbox">
                        <input type="checkbox"
                               ng-change="switchAllAgent(allAgentSelected)"
                               ng-model="allAgentSelected">
                        <span></span>
                    </label>
                </td>
                <td ng-click="sort.agent.type = 'name';
                    sort.agent.reverse = !sort.agent.reverse">
                    <i18n>name</i18n>
                    <i class="up-open" ng-show="sort.agent.type === 'name' && !sort.agent.reverse"></i>
                    <i class="down-open" ng-show="sort.agent.type === 'name' && sort.agent.reverse"></i>
                </td>
                <td ng-click="sort.agent.type = 'department';
                    sort.agent.reverse = !sort.agent.reverse">
                    <i18n>department</i18n>
                    <i class="up-open" ng-show="sort.agent.type === 'department' && !sort.agent.reverse"></i>
                    <i class="down-open" ng-show="sort.agent.type === 'department' && sort.agent.reverse"></i>
                </td>
                <td ng-click="sort.agent.type = 'phone';
                    sort.agent.reverse = !sort.agent.reverse">
                    <i18n>phone</i18n>
                    <i class="up-open" ng-show="sort.agent.type === 'phone' && !sort.agent.reverse"></i>
                    <i class="down-open" ng-show="sort.agent.type === 'phone' && sort.agent.reverse"></i>
                </td>
                <td ng-click="sort.agent.type = 'email';
                    sort.agent.reverse = !sort.agent.reverse">
                    <i18n>email</i18n>
                    <i class="up-open" ng-show="sort.agent.type === 'email' && !sort.agent.reverse"></i>
                    <i class="down-open" ng-show="sort.agent.type === 'email' && sort.agent.reverse"></i>
                </td>
                </thead>
                <tbody>
                <tr ng-repeat="agent in agents.all | orderBy:sort.agent.type:sort.agent.reverse">
                    <td>
                        <label class="checkbox">
                            <input type="checkbox" ng-model="agent.selected">
                            <span></span>
                        </label>
                    </td>
                    <td>[[agent.name]]</td>
                    <td>[[agent.department]]</td>
                    <td>[[agent.phone]]</td>
                    <td>[[agent.email]]</td>
                </tr>
                </tbody>
            </table>
        </article>
    </div>

    <lightbox show="display.lightbox.agent"
              on-close="cancelAgentForm()">
        <h2><i18n>lystore.agent.add</i18n></h2>
        <form ng-submit="validAgent(agent)">
            <div class="row">
                <label class="cell twelve">
                    <span class="four cell">
                        <i18n>lystore.agent.name</i18n>
                    </span>
                    <input class="cell eight" type="text" ng-model="agent.name" required />
                </label>
                <label class="cell twelve">
                    <span class="four cell">
                        <i18n>department</i18n>
                    </span>
                    <input class="cell eight" type="text" ng-model="agent.department" required />
                </label>
                <label class="cell twelve">
                    <span class="four cell">
                        <i18n>phone</i18n>
                    </span>
                    <input class="cell eight" type="text" ng-model="agent.phone" required />
                </label>
                <label class="cell twelve">
                    <span class="four cell">
                        <i18n>email</i18n>
                    </span>
                    <input type="email" class="cell eight" ng-model="agent.email" required />
                </label>
            </div>
            <div class="right-magnet">
                <input type="button" class="cancel" ng-click="cancelAgentForm()" value="Annuler" />
                <input type="submit" class="button" />
            </div>
        </form>
    </lightbox>

    <section class="toggle-buttons" ng-class="{ hide: agents.selection().length === 0 }">
        <div class="toggle">
            <div class="row">
                <button ng-click="openAgentForm(agents.selection()[0])" ng-show="agents.selection().length === 1">
                    <i18n>modify</i18n>
                </button>
                <button ng-click="deleteAgents(agents.selection())"><i18n>delete</i18n></button>
            </div>
        </div>
    </section>
</div>