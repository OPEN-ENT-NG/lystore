
<div workflow="lystore.administrator">
    <input type="button"  ng-click="openCampaignForm()" class="right-magnet" i18n-value="lystore.campaigns.add"/>
</div>
<div class="twelve cell manage-campaign"  workflow="lystore.manager">
    <article class="twelve cell " ng-repeat="campaign in campaigns.all track by $index ">
        <div class="row">
            <div class="twelve cell" workflow="lystore.administrator">
                <label class="checkbox">
                    <input type="checkbox" ng-model="campaign.selected" >
                    <span></span>
                </label>
            </div>
            <div class="two cell campaign-image">
                <img ng-src="[[campaign.image]]" ng-show="campaign.image!==null && campaign.image!==undefined " />
                <img skin-src="/img/illustrations/pages-default.png" ng-show="campaign.image===null || campaign.image===undefined "/>
            </div>
            <div class="nine cell right-magnet">
                <h3>[[campaign.name]]</h3>
                <p> [[campaign.nb_structures]] <i18n>structures</i18n> </p>
                <p> [[campaign.nb_equipments]] <i18n>lystore.equipments.available</i18n> </p>
            </div>
        </div>
        <div class="row" workflow="lystore.administrator">
            <button ng-click="redirectTo('/campaigns/' + campaign.id + '/purse')"><i18n>lystore.campaign.purse.manage</i18n></button>
            <div class="right-magnet">
                <switch ng-model="campaign.accessible" ng-change="campaign.updateAccessibility()"></switch>
            </div>
        </div>
    </article>
</div>

<lightbox on-close="display.lightbox.campaign = false;"
          show="display.lightbox.campaign"
          workflow="lystore.administrator">
    <container template="campaign.lightbox"></container>
</lightbox>

<section class="toggle-buttons" ng-class="{ hide: campaigns.selected.length === 0 }" workflow="lystore.administrator">
    <div class="toggle">
        <div class="row">
            <button ng-click="openCampaignForm(campaigns.selected[0])" ng-show="campaigns.selected.length === 1">
                <i18n>modify</i18n>
            </button>
            <button ng-click="openCampaignsDeletion()"><i18n>delete</i18n></button>
        </div>
    </div>
</section>